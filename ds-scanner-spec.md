# DS Adoption Scanner ‚Äî –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–ª—è Claude Code

## üéØ –¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞

CLI-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –ø–æ–¥—Å—á—ë—Ç–∞ adoption –¥–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º—ã –≤ 10+ React/TypeScript —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è—Ö.
–°–∫–∞–Ω–∏—Ä—É–µ—Ç JSX-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∏—Ä—É–µ—Ç –∏—Ö –ø–æ –∏—Å—Ç–æ—á–Ω–∏–∫—É (DS / –ª–æ–∫–∞–ª—å–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ / –∫–∞—Å—Ç–æ–º / third-party / HTML),
—Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç adoption rate –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç—á—ë—Ç—ã.

**–í–¥–æ—Ö–Ω–æ–≤–ª—ë–Ω**: omlet.dev (–ø–æ–¥—Ö–æ–¥ –∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ –º–µ—Ç—Ä–∏–∫–∞–º), react-scanner (AST-–ø–∞—Ä—Å–∏–Ω–≥).

**–ö–ª—é—á–µ–≤–æ–µ –æ—Ç–ª–∏—á–∏–µ –æ—Ç –∞–Ω–∞–ª–æ–≥–æ–≤**: —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ AI-–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤ –ø–∞–∫–µ—Ç–µ, –ø–æ–∑–≤–æ–ª—è—é—â–∏–µ
–ª—é–±–æ–º—É AI-–∞–≥–µ–Ω—Ç—É (Cursor, Claude Code, Aider) —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
–¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è "—Ç–µ–Ω–µ–≤—ã—Ö" –¥—É–±–ª–∏–∫–∞—Ç–æ–≤, —É—Ç–æ—á–Ω–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏.

---

## üì¶ –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

### Core
- **–Ø–∑—ã–∫**: TypeScript (—Å—Ç—Ä–æ–≥–∏–π —Ä–µ–∂–∏–º)
- **–†–∞–Ω—Ç–∞–π–º**: Node.js >= 18
- **–°–±–æ—Ä–∫–∞**: tsup (ESM + CJS)
- **CLI —Ñ—Ä–µ–π–º–≤–æ—Ä–∫**: `commander`

### AST –∏ –ø–∞—Ä—Å–∏–Ω–≥
- **–ü–∞—Ä—Å–µ—Ä**: `@typescript-eslint/typescript-estree` ‚Äî –ø–∞—Ä—Å–∏–Ω–≥ .ts/.tsx/.js/.jsx –≤ ESTree AST
- **Traversal**: `@typescript-eslint/typescript-estree` –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π walker –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ–π —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –≤–∏–∑–∏—Ç–æ—Ä
- **Module resolution**: `typescript` (—Ç–æ–ª—å–∫–æ `ts.resolveModuleName()` –∏ `ts.readConfigFile()`)
- **File discovery**: `fdir` ‚Äî –±—ã—Å—Ç—Ä—ã–π directory crawler
- **Glob matching**: `picomatch` ‚Äî –¥–ª—è include/exclude –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤

### Output
- **–¢–∞–±–ª–∏—Ü—ã**: `cli-table3`
- **–¶–≤–µ—Ç–∞**: `chalk`
- **–ü—Ä–æ–≥—Ä–µ—Å—Å**: `ora` (—Å–ø–∏–Ω–Ω–µ—Ä)

---

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
ds-scanner/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ cli.ts                    # Entry point, commander setup
‚îÇ   ‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ loader.ts             # –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ schema.ts             # TypeScript —Ç–∏–ø—ã –∫–æ–Ω—Ñ–∏–≥–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ defaults.ts           # –î–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ scanner/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ file-discovery.ts     # –ü–æ–∏—Å–∫ —Ñ–∞–π–ª–æ–≤ —á–µ—Ä–µ–∑ fdir
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ parser.ts             # AST –ø–∞—Ä—Å–∏–Ω–≥ –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ import-resolver.ts    # –†–µ–∑–æ–ª–≤ –∏–º–ø–æ—Ä—Ç–æ–≤ —á–µ—Ä–µ–∑ TS API
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ jsx-extractor.ts      # –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ JSX usage –∏–∑ AST
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ categorizer.ts        # –ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ orchestrator.ts       # –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª–Ω–æ–≥–æ —Å–∫–∞–Ω–∞
‚îÇ   ‚îú‚îÄ‚îÄ metrics/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ calculator.ts         # –†–∞—Å—á—ë—Ç adoption –º–µ—Ç—Ä–∏–∫
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ aggregator.ts         # –ê–≥—Ä–µ–≥–∞—Ü–∏—è –ø–æ —Ä–µ–ø–æ/–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ history.ts            # –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –ø—Ä–µ–¥—ã–¥—É—â–∏–º–∏ —Å–∫–∞–Ω–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ output/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ json-reporter.ts      # JSON –≤—ã–≤–æ–¥
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ table-reporter.ts     # CLI-—Ç–∞–±–ª–∏—Ü—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ csv-reporter.ts       # CSV –≤—ã–≤–æ–¥
‚îÇ   ‚îî‚îÄ‚îÄ types.ts                  # –û–±—â–∏–µ TypeScript —Ç–∏–ø—ã
‚îú‚îÄ‚îÄ .ds-scanner.config.ts         # –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥–∞
‚îú‚îÄ‚îÄ ai-instructions/              # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è AI-–∞–≥–µ–Ω—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ README.md
‚îÇ   ‚îú‚îÄ‚îÄ shadow-detection.md
‚îÇ   ‚îú‚îÄ‚îÄ categorization.md
‚îÇ   ‚îî‚îÄ‚îÄ report.md
‚îú‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ tsconfig.json
‚îî‚îÄ‚îÄ README.md
```

---

## üìù –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –§–∞–π–ª –∫–æ–Ω—Ñ–∏–≥–∞: `.ds-scanner.config.ts`

```typescript
import { defineConfig } from 'ds-adoption-scanner';

export default defineConfig({
  // ===== –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è =====

  // –ü—É—Ç–∏ –∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º –¥–ª—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
  repositories: [
    '/path/to/repo-1',
    '/path/to/repo-2',
    // –ü–æ–¥–¥–µ—Ä–∂–∫–∞ glob:
    // '/projects/frontend/*'
  ],

  // –î–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º—ã ‚Äî —è–¥—Ä–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
  // –ö–∞–∂–¥–∞—è DS ‚Äî –∏–º–µ–Ω–æ–≤–∞–Ω–Ω–∞—è –≥—Ä—É–ø–ø–∞ –ø–∞–∫–µ—Ç–æ–≤
  // –í –æ—Ç—á—ë—Ç–µ adoption —Å—á–∏—Ç–∞–µ—Ç—Å—è –∏ —Å—É–º–º–∞—Ä–Ω–æ, –∏ –ø–æ –∫–∞–∂–¥–æ–π DS –æ—Ç–¥–µ–ª—å–Ω–æ
  designSystems: [
    {
      name: 'TUI',                    // –ß–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º–æ–µ –∏–º—è –¥–ª—è –æ—Ç—á—ë—Ç–∞
      packages: [
        '@tui/components',
        '@tui/icons',
        '@tui/tokens',
      ],
    },
    {
      name: 'Beaver',
      packages: [
        'beaver-ui',
        'beaver-ui/*',               // –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–¥–ø–∞–∫–µ—Ç–æ–≤
        '@beaver/patterns',
      ],
    },
    // –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Ö–æ—Ç—å 5 DS –µ—Å–ª–∏ –Ω—É–∂–Ω–æ:
    // { name: 'Mobile DS', packages: ['@mobile-ui/components'] },
  ],

  // ===== –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–æ–ª—è =====

  // –ü–∞—Ç—Ç–µ—Ä–Ω—ã –≤–∫–ª—é—á–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–∏–∂–µ)
  include: ['src/**/*.{ts,tsx,js,jsx}'],

  // –ü–∞—Ç—Ç–µ—Ä–Ω—ã –∏—Å–∫–ª—é—á–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤
  exclude: [
    '**/node_modules/**',
    '**/dist/**',
    '**/build/**',
    '**/.next/**',
    '**/coverage/**',
    '**/__tests__/**',
    '**/__mocks__/**',
    '**/*.test.*',
    '**/*.spec.*',
    '**/*.stories.*',
    '**/*.d.ts',
  ],

  // –õ–æ–∫–∞–ª—å–Ω—ã–µ/shared –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
  // –ú–∞—Ç—á–∞—Ç—Å—è –ø–æ import specifier –ò –ø–æ resolved file path
  localLibraryPatterns: [
    '@shared/components',
    '@shared/components/*',
    '**/shared/ui/**',
    '**/common/components/**',
  ],

  // Third-party –ø–∞–∫–µ—Ç—ã –¥–ª—è –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —Ç—Ä–µ–∫–∏–Ω–≥–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  trackedThirdParty: [
    '@mui/material',
    'antd',
    'react-select',
  ],

  // –ü—É—Ç—å –∫ tsconfig –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –∫–∞–∂–¥–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
  tsconfig: 'tsconfig.json',

  // –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ —Å–∫–∞–Ω–æ–≤ (AI-–∞–≥–µ–Ω—Ç —á–∏—Ç–∞–µ—Ç –æ—Ç—Å—é–¥–∞)
  historyDir: './.ds-metrics',

  // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤—ã–≤–æ–¥–∞
  output: {
    format: 'table',           // 'json' | 'table' | 'csv'
    path: undefined,           // –ï—Å–ª–∏ —É–∫–∞–∑–∞–Ω ‚Äî —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ —Ñ–∞–π–ª
    verbose: false,            // –í–∫–ª—é—á–∞–µ—Ç per-file breakdown
  },

  // –ü–æ—Ä–æ–≥–∏ –¥–ª—è CI (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  thresholds: {
    minAdoptionRate: undefined,     // –§–µ–π–ª–∏—Ç—å –µ—Å–ª–∏ –°–£–ú–ú–ê–†–ù–´–ô adoption –Ω–∏–∂–µ (%)
    maxCustomComponents: undefined, // –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞—Ç—å –µ—Å–ª–∏ –∫–∞—Å—Ç–æ–º –≤—ã—à–µ
    // Per-DS –ø–æ—Ä–æ–≥–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
    perDesignSystem: {
      // 'TUI': { minAdoptionRate: 40 },
      // 'Beaver': { minAdoptionRate: 20 },
    },
  },

  // –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏ —Å–∫–∞–Ω–æ–≤
  historyDir: './.ds-metrics',
});
```

### –¢–∏–ø –∫–æ–Ω—Ñ–∏–≥–∞

```typescript
interface DSScannerConfig {
  repositories: string[];
  designSystems: DesignSystemDef[];
  include?: string[];
  exclude?: string[];
  localLibraryPatterns?: string[];
  trackedThirdParty?: string[];
  tsconfig?: string;
  output?: OutputConfig;
  thresholds?: ThresholdConfig;
  historyDir?: string;
}

interface DesignSystemDef {
  name: string;        // –ò–º—è DS –¥–ª—è –æ—Ç—á—ë—Ç–∞ ("TUI", "Beaver")
  packages: string[];  // npm-–ø–∞–∫–µ—Ç—ã, –æ—Ç–Ω–æ—Å—è—â–∏–µ—Å—è –∫ —ç—Ç–æ–π DS
}

interface OutputConfig {
  format: 'json' | 'table' | 'csv';
  path?: string;
  verbose?: boolean;
}

interface ThresholdConfig {
  minAdoptionRate?: number;
  maxCustomComponents?: number;
  perDesignSystem?: Record<string, { minAdoptionRate?: number }>;
}
```

---

## üîç Core Scanner Pipeline

### Stage 1: File Discovery (`file-discovery.ts`)

–ò—Å–ø–æ–ª—å–∑—É–µ–º `fdir` –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –æ–±—Ö–æ–¥–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π.

**Input**: –º–∞—Å—Å–∏–≤ –ø—É—Ç–µ–π –∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º + include/exclude –ø–∞—Ç—Ç–µ—Ä–Ω—ã
**Output**: `Map<string, string[]>` ‚Äî repository path ‚Üí –º–∞—Å—Å–∏–≤ file paths

```typescript
interface DiscoveryResult {
  repository: string;           // –ü—É—Ç—å –∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é
  repositoryName: string;       // –ò–º—è (–ø–æ—Å–ª–µ–¥–Ω–∏–π —Å–µ–≥–º–µ–Ω—Ç –ø—É—Ç–∏)
  files: string[];              // –ê–±—Å–æ–ª—é—Ç–Ω—ã–µ –ø—É—Ç–∏ –∫ —Ñ–∞–π–ª–∞–º
  totalFiles: number;
}
```

–õ–æ–≥–∏–∫–∞:
1. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—É—Ç–∏ –≤ `repositories`:
   - –ï—Å–ª–∏ –ø—É—Ç—å —Å–æ–¥–µ—Ä–∂–∏—Ç glob ‚Üí —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å —á–µ—Ä–µ–∑ picomatch
   - –ò–Ω–∞—á–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∫ –µ—Å—Ç—å
2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –∑–∞–ø—É—Å—Ç–∏—Ç—å `fdir`:
   - –§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è–º: `.ts`, `.tsx`, `.js`, `.jsx`
   - –ü—Ä–∏–º–µ–Ω–∏—Ç—å include –ø–∞—Ç—Ç–µ—Ä–Ω—ã (picomatch)
   - –ü—Ä–∏–º–µ–Ω–∏—Ç—å exclude –ø–∞—Ç—Ç–µ—Ä–Ω—ã (picomatch)
3. –í–µ—Ä–Ω—É—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å –ø–æ–¥—Å—á—ë—Ç–æ–º

### Stage 2: Parse & Extract (`parser.ts`, `jsx-extractor.ts`)

–ü–∞—Ä—Å–∏–º –∫–∞–∂–¥—ã–π —Ñ–∞–π–ª –∏ –∏–∑–≤–ª–µ–∫–∞–µ–º –¥–≤–∞ –Ω–∞–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö: –∫–∞—Ä—Ç—É –∏–º–ø–æ—Ä—Ç–æ–≤ –∏ JSX usage.

**–¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö**:

```typescript
// –ó–∞–ø–∏—Å—å –æ–± –æ–¥–Ω–æ–º –∏–º–ø–æ—Ä—Ç–µ –≤ —Ñ–∞–π–ª–µ
interface ImportEntry {
  localName: string;       // –õ–æ–∫–∞–ª—å–Ω–æ–µ –∏–º—è –≤ —Ñ–∞–π–ª–µ ("Btn")
  importedName: string;    // –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –∏–º—è ("Button") –∏–ª–∏ "default"
  source: string;          // Module specifier ("@tui/components")
  type: 'named' | 'default' | 'namespace';
}

// –ö–∞—Ä—Ç–∞ –∏–º–ø–æ—Ä—Ç–æ–≤: localName ‚Üí ImportEntry
type ImportMap = Map<string, ImportEntry>;

// –ó–∞–ø–∏—Å—å –æ–± –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ JSX-—ç–ª–µ–º–µ–Ω—Ç–∞
interface JSXUsageRecord {
  componentName: string;       // "Button", "Select.Option"
  localName: string;           // –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∫–æ–¥–µ ("Btn", "DS.Button")
  importEntry: ImportEntry | null;  // null –¥–ª—è HTML –∏–ª–∏ –Ω–µ—Ä–∞–∑—Ä–µ–∑–æ–ª–≤–ª–µ–Ω–Ω—ã—Ö
  filePath: string;
  line: number;
  column: number;
  props: string[];             // –°–ø–∏—Å–æ–∫ –∏–º—ë–Ω –ø—Ä–æ–ø—Å–æ–≤ ["variant", "size"]
  hasSpreadProps: boolean;     // –ï—Å—Ç—å –ª–∏ {...props}
}

// –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–∞—Ä—Å–∏–Ω–≥–∞ –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
interface FileParseResult {
  filePath: string;
  imports: ImportMap;
  jsxUsages: JSXUsageRecord[];
  errors: string[];            // –û—à–∏–±–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞ (–Ω–µ —Ñ–µ–π–ª–∏–º –≤–µ—Å—å —Å–∫–∞–Ω)
}
```

**–ê–ª–≥–æ—Ä–∏—Ç–º –ø–∞—Ä—Å–∏–Ω–≥–∞ —Ñ–∞–π–ª–∞**:

1. –ü—Ä–æ—á–∏—Ç–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞
2. –†–∞—Å–ø–∞—Ä—Å–∏—Ç—å —á–µ—Ä–µ–∑ `@typescript-eslint/typescript-estree` —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:
   ```typescript
   parse(code, {
     jsx: true,
     loc: true,
     range: true,
     tokens: false,      // –ù–µ –Ω—É–∂–Ω—ã –¥–ª—è –Ω–∞—à–µ–π –∑–∞–¥–∞—á–∏
     comment: false,
     errorOnUnknownASTType: false,
   })
   ```
3. –ü–µ—Ä–≤—ã–π –ø—Ä–æ—Ö–æ–¥ –ø–æ AST ‚Äî —Å–æ–±—Ä–∞—Ç—å ImportMap:
   - `ImportDeclaration` ‚Üí –¥–ª—è –∫–∞–∂–¥–æ–≥–æ specifier:
     - `ImportSpecifier` ‚Üí named import (`imported.name`, `local.name`)
     - `ImportDefaultSpecifier` ‚Üí default import
     - `ImportNamespaceSpecifier` ‚Üí namespace import (`* as X`)
4. –í—Ç–æ—Ä–æ–π –ø—Ä–æ—Ö–æ–¥ ‚Äî —Å–æ–±—Ä–∞—Ç—å JSX usages:
   - `JSXOpeningElement` —Å `name`:
     - `JSXIdentifier` (name="Button") ‚Üí –ø—Ä–æ—Å—Ç–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, lookup –≤ ImportMap –ø–æ name
     - `JSXMemberExpression` (object.name="DS", property.name="Button") ‚Üí lookup object –≤ ImportMap, –∑–∞–ø–∏—Å–∞—Ç—å "DS.Button" / "Select.Option"
   - –î–ª—è –∫–∞–∂–¥–æ–≥–æ JSX —ç–ª–µ–º–µ–Ω—Ç–∞ —Å–æ–±—Ä–∞—Ç—å props:
     - `JSXAttribute` ‚Üí –¥–æ–±–∞–≤–∏—Ç—å –∏–º—è –≤ –º–∞—Å—Å–∏–≤ props
     - `JSXSpreadAttribute` ‚Üí —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å hasSpreadProps = true
   - –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å: –µ—Å–ª–∏ –∏–º—è –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –º–∞–ª–µ–Ω—å–∫–æ–π –±—É–∫–≤—ã ‚Üí —ç—Ç–æ HTML native, importEntry = null

### Stage 3: Import Resolution (`import-resolver.ts`)

–†–µ–∑–æ–ª–≤–∏–º –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –∏ aliased –∏–º–ø–æ—Ä—Ç—ã –≤ —Ä–µ–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª–æ–≤—ã–µ –ø—É—Ç–∏.

```typescript
interface ResolvedImport {
  originalSource: string;      // "@components/Button"
  resolvedPath: string | null; // "/repo/src/components/Button/index.tsx"
  isNodeModule: boolean;       // false
  packageName: string | null;  // null (–∏–ª–∏ "@tui/components" –¥–ª—è node_modules)
}
```

**–ê–ª–≥–æ—Ä–∏—Ç–º**:

1. –ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–∫–∞–Ω–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è ‚Äî –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–æ—á–∏—Ç–∞—Ç—å tsconfig:
   ```typescript
   const configFile = ts.readConfigFile(tsconfigPath, ts.sys.readFile);
   const parsed = ts.parseJsonConfigFileContent(configFile.config, ts.sys, repoRoot);
   const resolutionCache = ts.createModuleResolutionCache(repoRoot, (x) => x);
   ```

2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ `(source, containingFile)`:
   - –ï—Å–ª–∏ source –Ω–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `.` –∏ –Ω–µ –∞–ª–∏–∞—Å –∏–∑ paths ‚Üí —ç—Ç–æ node_module
     - –ò–∑–≤–ª–µ—á—å –∏–º—è –ø–∞–∫–µ—Ç–∞: `@scope/name` –∏–ª–∏ `name` (–ø–µ—Ä–≤—ã–µ 1-2 —Å–µ–≥–º–µ–Ω—Ç–∞)
     - –í–µ—Ä–Ω—É—Ç—å `{ isNodeModule: true, packageName }`
   - –ò–Ω–∞—á–µ ‚Üí —Ä–µ–∑–æ–ª–≤–∏—Ç—å —á–µ—Ä–µ–∑ TypeScript:
     ```typescript
     const result = ts.resolveModuleName(source, containingFile, parsed.options, ts.sys, resolutionCache);
     ```
   - –ó–∞–∫—ç—à–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç

3. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ: `Map<string, ResolvedImport>` —Å –∫–ª—é—á–æ–º `${source}::${containingFile}`

### Stage 4: Categorization (`categorizer.ts`)

–ö–∞–∂–¥—ã–π JSX usage –ø–æ–ª—É—á–∞–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏—é –Ω–∞ –æ—Å–Ω–æ–≤–µ import info –∏ resolved path.

```typescript
type ComponentCategory =
  | 'design-system'    // –ò–∑ DS –ø–∞–∫–µ—Ç–æ–≤ (–∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è DS —É–∫–∞–∑–∞–Ω–∞ –≤ dsName)
  | 'local-library'    // –ò–∑ shared/internal library
  | 'third-party'      // –ò–∑ –ø—Ä–æ—á–∏—Ö node_modules
  | 'local'            // –õ–æ–∫–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞
  | 'html-native';     // HTML —ç–ª–µ–º–µ–Ω—Ç—ã (div, span –∏ —Ç.–¥.)

interface CategorizedUsage extends JSXUsageRecord {
  category: ComponentCategory;
  dsName: string | null;       // –ò–º—è DS ("TUI", "Beaver") ‚Äî —Ç–æ–ª—å–∫–æ –¥–ª—è category === 'design-system'
  packageName: string | null;  // –î–ª—è node_modules
  resolvedPath: string | null; // –î–ª—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö
}
```

**–ü—Ä–∞–≤–∏–ª–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–∏ (–≤ –ø–æ—Ä—è–¥–∫–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞)**:

```
1. –ò–º—è –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å lowercase ‚Üí 'html-native'
2. –ù–µ—Ç importEntry (–æ–ø—Ä–µ–¥–µ–ª—ë–Ω –≤ —Ç–æ–º –∂–µ —Ñ–∞–π–ª–µ) ‚Üí 'local'
3. importEntry.source –º–∞—Ç—á–∏—Ç packages –∏–∑ –û–î–ù–û–ô –∏–∑ designSystems
   ‚Üí 'design-system' + dsName = –Ω–∞–∑–≤–∞–Ω–∏–µ —ç—Ç–æ–π DS
   (–ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –≤—Å–µ designSystems –ø–æ –ø–æ—Ä—è–¥–∫—É, –ø–µ—Ä–≤—ã–π –º–∞—Ç—á –ø–æ–±–µ–∂–¥–∞–µ—Ç)
4. importEntry.source –º–∞—Ç—á–∏—Ç localLibraryPatterns
   –ò–õ–ò resolvedPath –º–∞—Ç—á–∏—Ç localLibraryPatterns ‚Üí 'local-library'
5. –ù–µ-relative import (–Ω–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å . –∏–ª–∏ /) ‚Üí 'third-party'
6. –í—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ ‚Üí 'local'
```

**–ü—Ä–∏–º–µ—Ä –º–∞—Ç—á–∏–Ω–≥–∞ –ø–æ DS**:
```typescript
function findDesignSystem(source: string, config: DSScannerConfig): string | null {
  for (const ds of config.designSystems) {
    const matches = ds.packages.some(pkg =>
      source === pkg ||
      source.startsWith(pkg.replace('/*', '/')) ||
      (pkg.endsWith('/*') && source.startsWith(pkg.slice(0, -2)))
    );
    if (matches) return ds.name;  // "TUI", "Beaver", etc.
  }
  return null;
}
```

### Stage 5: Aggregation & Metrics (`calculator.ts`, `aggregator.ts`)

**–û—Å–Ω–æ–≤–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∞ adoption**:

```
total_DS = sum(instances) –ø–æ –≤—Å–µ–º designSystems
adoption_rate = total_DS / (total_DS + local_library_instances + local_instances) √ó 100
```

Per-DS adoption (–∫–∞–∫—É—é –¥–æ–ª—é –∑–∞–Ω–∏–º–∞–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è DS):
```
ds_adoption["TUI"] = TUI_instances / (total_DS + local_library + local) √ó 100
ds_adoption["Beaver"] = Beaver_instances / (total_DS + local_library + local) √ó 100
```

‚ö†Ô∏è HTML native –∏ third-party **–∏—Å–∫–ª—é—á–µ–Ω—ã** –∏–∑ —Ñ–æ—Ä–º—É–ª—ã. Third-party ‚Äî —ç—Ç–æ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (react-router, formik), –∞ –Ω–µ UI-—Ä–µ—à–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ DS –º–æ–≥ –±—ã –∑–∞–º–µ–Ω–∏—Ç—å.

‚ö†Ô∏è –°—É–º–º–∞ `ds_adoption["TUI"]` + `ds_adoption["Beaver"]` + local_library_share + local_share = 100%

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏**:

```typescript
interface ScanMetrics {
  // –û—Å–Ω–æ–≤–Ω–∞—è –º–µ—Ç—Ä–∏–∫–∞ (—Å—É–º–º–∞—Ä–Ω–æ –ø–æ –≤—Å–µ–º DS)
  adoptionRate: number;          // % –æ—Ç 0 –¥–æ 100

  // Breakdown –ø–æ –∫–∞–∂–¥–æ–π DS –æ—Ç–¥–µ–ª—å–Ω–æ
  designSystems: DesignSystemMetrics[];

  // –°—É–º–º–∞—Ä–Ω—ã–π breakdown –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
  designSystemTotal: CategoryMetrics;   // –°—É–º–º–∞ –≤—Å–µ—Ö DS
  localLibrary: CategoryMetrics;
  local: CategoryMetrics;
  thirdParty: CategoryMetrics;
  htmlNative: CategoryMetrics;

  // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ
  filePenetration: number;       // % —Ñ–∞–π–ª–æ–≤ —Å —Ö–æ—Ç—è –±—ã –æ–¥–Ω–∏–º DS-–∏–º–ø–æ—Ä—Ç–æ–º
  totalComponentInstances: number; // –û–±—â–µ–µ –∫–æ–ª-–≤–æ JSX (–±–µ–∑ HTML)
  filesScanned: number;
}

// –ú–µ—Ç—Ä–∏–∫–∏ –æ–¥–Ω–æ–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –¥–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º—ã
interface DesignSystemMetrics {
  name: string;                  // "TUI", "Beaver"
  packages: string[];            // –ü–∞–∫–µ—Ç—ã —ç—Ç–æ–π DS (–∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞)
  adoptionRate: number;          // –î–æ–ª—è –≠–¢–û–ô DS –≤ –æ–±—â–µ–º adoption
  instances: number;
  uniqueComponents: number;
  topComponents: ComponentStat[];
  filePenetration: number;       // % —Ñ–∞–π–ª–æ–≤ —Å –∏–º–ø–æ—Ä—Ç–æ–º –∏–∑ –≠–¢–û–ô DS
}

interface CategoryMetrics {
  instances: number;             // –û–±—â–µ–µ –∫–æ–ª-–≤–æ JSX usage
  uniqueComponents: number;      // –ö–æ–ª-–≤–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∏–º—ë–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
  topComponents: ComponentStat[]; // –¢–æ–ø-10 –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
}

interface ComponentStat {
  name: string;
  dsName: string | null;         // –ö –∫–∞–∫–æ–π DS –æ—Ç–Ω–æ—Å–∏—Ç—Å—è (null –¥–ª—è –Ω–µ-DS)
  packageName: string | null;
  instances: number;
  filesUsedIn: number;
  topProps: { name: string; count: number }[];
}
```

**–§–æ—Ä–º—É–ª—ã**:

–°—É–º–º–∞—Ä–Ω—ã–π adoption (–≤—Å–µ DS –≤–º–µ—Å—Ç–µ):
```
total_ds = —Å—É–º–º–∞ instances –ø–æ –≤—Å–µ–º designSystems
adoption_rate = total_ds / (total_ds + local_library + local) √ó 100
```

Per-DS adoption (–¥–æ–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π DS):
```
ds_adoption[i] = designSystems[i].instances / (total_ds + local_library + local) √ó 100
```

‚ö†Ô∏è –°—É–º–º–∞ –≤—Å–µ—Ö `ds_adoption[i]` + local_library_share + local_share = 100%.
–ö–∞–∂–¥–∞—è DS –ø–æ–ª—É—á–∞–µ—Ç —Å–≤–æ—é "–¥–æ–ª—é –ø–∏—Ä–æ–≥–∞".

---

## ü§ñ AI Layer ‚Äî –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –∞–≥–µ–Ω—Ç–∞

### –§–∏–ª–æ—Å–æ—Ñ–∏—è

–°–∫–∞–Ω–µ—Ä **—Ç–æ–ª—å–∫–æ —Å—á–∏—Ç–∞–µ—Ç —Ü–∏—Ñ—Ä—ã**. AI-–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ ‚Äî —ç—Ç–æ –æ–±—ã—á–Ω—ã–µ `.md` —Ñ–∞–π–ª—ã,
–∫–æ—Ç–æ—Ä—ã–µ –ø–∏—à—É—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ —Ç—É–ª–∑—ã –∏ –ª–µ–∂–∞—Ç –≤ –ø–∞–∫–µ—Ç–µ.
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–∞–º —Ä–µ—à–∞–µ—Ç –∫–æ–≥–¥–∞ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∞–≥–µ–Ω—Ç–∞ –∏ —á—Ç–æ —Å–ø—Ä–æ—Å–∏—Ç—å.

–ù–∏–∫–∞–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏, –Ω–∏–∫–∞–∫–∏—Ö API-–≤—ã–∑–æ–≤–æ–≤, –Ω–∏–∫–∞–∫–∏—Ö apply-–∫–æ–º–∞–Ω–¥.

### –§–ª–æ—É

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: ds-scanner analyze --output .ds-metrics/report.json
   ‚Üí –ü–æ–ª—É—á–∞–µ—Ç –æ—Ç—á—ë—Ç —Å —Ü–∏—Ñ—Ä–∞–º–∏ + –ø–æ–¥—Å–∫–∞–∑–∫—É –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ

2. CLI –≤—ã–≤–æ–¥–∏—Ç –≤ –∫–æ–Ω—Ü–µ:
   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
   ü§ñ AI-–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ node_modules/ds-scanner/ai-instructions/
      ‚Ä¢ shadow-detection.md  ‚Äî –Ω–∞–π—Ç–∏ –¥—É–±–ª–∏–∫–∞—Ç—ã DS-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –≤ –ª–æ–∫–∞–ª—å–Ω–æ–º –∫–æ–¥–µ
      ‚Ä¢ categorization.md    ‚Äî —É—Ç–æ—á–Ω–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—é –Ω–µ–æ–¥–Ω–æ–∑–Ω–∞—á–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
      ‚Ä¢ report.md            ‚Äî —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–π –æ—Ç—á—ë—Ç

   –ü—Ä–∏–º–µ—Ä: –æ—Ç–∫—Ä–æ–π Cursor/Claude Code –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏ —Å–ø—Ä–æ—Å–∏:
   "–ü—Ä–æ—á–∏—Ç–∞–π node_modules/ds-scanner/ai-instructions/shadow-detection.md
    –∏ .ds-metrics/report.json, –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –º–æ–∏ –ª–æ–∫–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã"
   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Å–≤–æ–µ–≥–æ –∞–≥–µ–Ω—Ç–∞ (Cursor, Claude Code, —á–∞—Ç, —á—Ç–æ —É–≥–æ–¥–Ω–æ)
4. –ó–∞–¥–∞—ë—Ç –≤–æ–ø—Ä–æ—Å, —Å—Å—ã–ª–∞—è—Å—å –Ω–∞ –Ω—É–∂–Ω—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é + —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–∫–∞–Ω–∞
5. –ê–≥–µ–Ω—Ç —á–∏—Ç–∞–µ—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é, —á–∏—Ç–∞–µ—Ç JSON, –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∫–æ–¥, –æ—Ç–≤–µ—á–∞–µ—Ç
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤ –ø–∞–∫–µ—Ç–µ

–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –∫–∞–∫ —á–∞—Å—Ç—å npm-–ø–∞–∫–µ—Ç–∞:

```
ds-scanner/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ ai-instructions/                    # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã, —á–∞—Å—Ç—å –ø–∞–∫–µ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ README.md                       # –û–±–∑–æ—Ä –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ shadow-detection.md             # –ü–æ–∏—Å–∫ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ DS-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ categorization.md               # –£—Ç–æ—á–Ω–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ report.md                       # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ—Ç—á—ë—Ç–∞
‚îî‚îÄ‚îÄ package.json                        # files: ["dist", "ai-instructions"]
```

–ü—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ —á–µ—Ä–µ–∑ npm –æ–Ω–∏ –æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤ `node_modules/ds-scanner/ai-instructions/`.
CLI –≤—ã–≤–æ–¥–∏—Ç –ø–æ–ª–Ω—ã–π –ø—É—Ç—å –∫ –Ω–∏–º –≤ –∫–æ–Ω—Ü–µ –∫–∞–∂–¥–æ–≥–æ —Å–∫–∞–Ω–∞.

---

### –§–∞–π–ª: `ai-instructions/README.md`

```markdown
# DS Adoption Scanner ‚Äî AI Instructions

–≠—Ç–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ–º–æ–≥–∞—é—Ç AI-–∞–≥–µ–Ω—Ç–∞–º (Claude Code, Cursor, Aider, ChatGPT –∏ –¥—Ä.)
–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º—ã.

## –î–æ—Å—Ç—É–ø–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ | –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å |
|------|----------|--------------------|
| shadow-detection.md | –ü–æ–∏—Å–∫ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö DS | –•–æ—á–µ—à—å –Ω–∞–π—Ç–∏ –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ –Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—é –≤ DS |
| categorization.md | –£—Ç–æ—á–Ω–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ | –°–∫–∞–Ω–µ—Ä –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏–ª –∫–∞—Ç–µ–≥–æ—Ä–∏—é |
| report.md | –ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–π –æ—Ç—á—ë—Ç —Å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏ | –ù—É–∂–µ–Ω —Å–∞–º–º–∞—Ä–∏ –¥–ª—è –∫–æ–º–∞–Ω–¥—ã/—Å—Ç–µ–π–∫—Ö–æ–ª–¥–µ—Ä–æ–≤ |

## –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

1. –ó–∞–ø—É—Å—Ç–∏ —Å–∫–∞–Ω–µ—Ä: `ds-scanner analyze --output .ds-metrics/report.json`
2. –û—Ç–∫—Ä–æ–π –∞–≥–µ–Ω—Ç–∞ (Cursor, Claude Code, –∏ —Ç.–¥.) –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
3. –î–∞–π –µ–º—É –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é, –Ω–∞–ø—Ä–∏–º–µ—Ä:

> –ü—Ä–æ—á–∏—Ç–∞–π —Ñ–∞–π–ª [–ø—É—Ç—å –∫ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏]. –†–µ–∑—É–ª—å—Ç–∞—Ç —Å–∫–∞–Ω–∞ –ª–µ–∂–∏—Ç –≤ .ds-metrics/report.json.
> [–¢–≤–æ–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –≤–æ–ø—Ä–æ—Å]

–ê–≥–µ–Ω—Ç –ø—Ä–æ—á–∏—Ç–∞–µ—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é, –ø–æ–π–º—ë—Ç —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞,
–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç –∞–Ω–∞–ª–∏–∑ —Å —É—á—ë—Ç–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞.
```

---

### –§–∞–π–ª: `ai-instructions/shadow-detection.md`

```markdown
# Shadow Component Detection

## –¢–≤–æ—è —Ä–æ–ª—å
–¢—ã –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—à—å React-–∫–æ–¥–æ–≤—É—é –±–∞–∑—É –¥–ª—è –ø–æ–∏—Å–∫–∞ "—Ç–µ–Ω–µ–≤—ã—Ö" –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ ‚Äî
–ª–æ–∫–∞–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –¥—É–±–ª–∏—Ä—É—é—Ç –∏–ª–∏ –æ–±–æ—Ä–∞—á–∏–≤–∞—é—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
–∏–∑ –¥–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º—ã (DS).

## –ö–æ–Ω—Ç–µ–∫—Å—Ç

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø—É—Å—Ç–∏–ª ds-scanner, —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ª–µ–∂–∏—Ç –≤ JSON-—Ñ–∞–π–ª–µ.
–í JSON –µ—Å—Ç—å –ø–æ–ª—è:
- `summary.designSystems[]` ‚Äî —Å–ø–∏—Å–æ–∫ DS —Å –∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
- `byComponent.designSystems[]` ‚Äî –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∫–∞–∂–¥–æ–π DS
- `byComponent.localMostUsed[]` ‚Äî —Å–∞–º—ã–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ª–æ–∫–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

## –ß—Ç–æ –¥–µ–ª–∞—Ç—å

1. –ü—Ä–æ—á–∏—Ç–∞–π JSON-–æ—Ç—á—ë—Ç, –Ω–∞–π–¥–∏ `byComponent.localMostUsed` ‚Äî —ç—Ç–æ –∫–∞–Ω–¥–∏–¥–∞—Ç—ã –Ω–∞ –∞–Ω–∞–ª–∏–∑
2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞ (–Ω–∞—á–Ω–∏ —Å —Å–∞–º—ã—Ö –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö):
   a. –ù–∞–π–¥–∏ —Ñ–∞–π–ª-–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –≤ –∫–æ–¥–æ–≤–æ–π –±–∞–∑–µ (–ø–æ–ª–µ `source` / `resolvedPath`)
   b. –ü—Ä–æ—á–∏—Ç–∞–π –µ–≥–æ –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥
   c. –°—Ä–∞–≤–Ω–∏ —Å DS-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ –∏–∑ `byComponent.designSystems`
3. –û–ø—Ä–µ–¥–µ–ª–∏: —ç—Ç–æ –¥—É–±–ª–∏–∫–∞—Ç/–æ–±—ë—Ä—Ç–∫–∞ DS-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –∏–ª–∏ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç?

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ "–¥—É–±–ª–∏–∫–∞—Ç–∞"
- ‚úÖ –†–µ–Ω–¥–µ—Ä–∏—Ç DS-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏ –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ—Ç –ø—Ä–æ–ø—Å—ã (—Ç–æ–Ω–∫–∞—è –æ–±—ë—Ä—Ç–∫–∞)
- ‚úÖ –ü–æ–≤—Ç–æ—Ä—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å DS-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ –æ—Ç–ª–∏—á–∏—è–º–∏
- ‚úÖ –î–æ–±–∞–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ —Å—Ç–∏–ª–∏–∑–∞—Ü–∏—é –ø–æ–≤–µ—Ä—Ö DS-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
- ‚ùå –ù–ï –¥—É–±–ª–∏–∫–∞—Ç: —Å–æ–¥–µ—Ä–∂–∏—Ç —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω—É—é –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É
- ‚ùå –ù–ï –¥—É–±–ª–∏–∫–∞—Ç: –∫–æ–º–ø–æ–∑–∏—Ü–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö DS-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å –∫–∞—Å—Ç–æ–º–Ω–æ–π –ª–æ–≥–∏–∫–æ–π

## –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞

–î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ —Å–æ–æ–±—â–∏:
- –ò–º—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –∏ –≥–¥–µ –æ–Ω –æ–ø—Ä–µ–¥–µ–ª—ë–Ω
- –î—É–±–ª–∏–∫–∞—Ç –ª–∏ (–¥–∞/–Ω–µ—Ç)
- –ï—Å–ª–∏ –¥–∞: –∫–∞–∫–æ–π DS-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥—É–±–ª–∏—Ä—É–µ—Ç –∏ –∏–∑ –∫–∞–∫–æ–π DS (–Ω–∞–ø—Ä–∏–º–µ—Ä "TUI.Button")
- –°–ª–æ–∂–Ω–æ—Å—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏: easy / medium / hard
- –ß—Ç–æ –º–µ—à–∞–µ—Ç –ø—Ä—è–º–æ–º—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é DS-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
- –°–∫–æ–ª—å–∫–æ —Ä–∞–∑ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (instances –∏–∑ –æ—Ç—á—ë—Ç–∞) ‚Äî —ç—Ç–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–∏

–í –∫–æ–Ω—Ü–µ –¥–∞–π summary:
- –°–∫–æ–ª—å–∫–æ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –Ω–∞–π–¥–µ–Ω–æ
- –°–∫–æ–ª—å–∫–æ instances –º–æ–∂–Ω–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å
- –ü–µ—Ä–µ—Å—á–∏—Ç–∞–Ω–Ω—ã–π adoption rate –µ—Å–ª–∏ –≤—Å–µ easy-–¥—É–±–ª–∏–∫–∞—Ç—ã –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å
```

---

### –§–∞–π–ª: `ai-instructions/categorization.md`

```markdown
# Component Categorization Helper

## –¢–≤–æ—è —Ä–æ–ª—å
–¢—ã –ø–æ–º–æ–≥–∞–µ—à—å —É—Ç–æ—á–Ω–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—é React-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ
AST-—Å–∫–∞–Ω–µ—Ä –º–æ–≥ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –Ω–µ—Ç–æ—á–Ω–æ.

## –ö–æ–Ω—Ç–µ–∫—Å—Ç

–°–∫–∞–Ω–µ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∏—Ä—É–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º:
1. Lowercase name ‚Üí `html-native` (div, span)
2. Import –∏–∑ –ø–∞–∫–µ—Ç–æ–≤ –≤ `designSystems[].packages` ‚Üí `design-system`
3. Import –º–∞—Ç—á–∏—Ç `localLibraryPatterns` ‚Üí `local-library`
4. –ü—Ä–æ—á–∏–µ npm-–ø–∞–∫–µ—Ç—ã ‚Üí `third-party`
5. –í—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ ‚Üí `local`

–ë—ã–≤–∞—é—Ç –Ω–µ–æ–¥–Ω–æ–∑–Ω–∞—á–Ω—ã–µ —Å–ª—É—á–∞–∏:
- –†–µ—ç–∫—Å–ø–æ—Ä—Ç—ã DS-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –ø—É—Ç–∏
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–∑ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –ø–∞–∫–µ—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ —Å—É—Ç–∏ DS
- Shared-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ —Å–∫–∞–Ω–µ—Ä –ø–æ–º–µ—Ç–∏–ª –∫–∞–∫ `local`

## –ß—Ç–æ –¥–µ–ª–∞—Ç—å

1. –ü—Ä–æ—á–∏—Ç–∞–π JSON-–æ—Ç—á—ë—Ç
2. –ü–æ—Å–º–æ—Ç—Ä–∏ —Å–µ–∫—Ü–∏—é `byComponent.localMostUsed` ‚Äî –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å category `local`
3. –ï—Å–ª–∏ –≤–∏–¥–∏—à—å –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã (–∏–º–µ–Ω–∞/–ø—É—Ç–∏ –ø–æ—Ö–æ–∂–∏ –Ω–∞ DS), –ø—Ä–æ–≤–µ—Ä—å:
   - –û—Ç–∫—É–¥–∞ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è (importSource)
   - –ì–¥–µ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω (resolvedPath)
   - –ï—Å—Ç—å –ª–∏ –≤ –∏—Å—Ö–æ–¥–Ω–∏–∫–µ —Ä–µ—ç–∫—Å–ø–æ—Ä—Ç –∏–∑ DS-–ø–∞–∫–µ—Ç–∞
4. –ü—Ä–µ–¥–ª–æ–∂–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é –∏ –æ–±—ä—è—Å–Ω–∏ –ø–æ—á–µ–º—É

## –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞

–°–ø–∏—Å–æ–∫ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏:
- –ò–º—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
- –¢–µ–∫—É—â–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è
- –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è (–∏ –∫–∞–∫–∞—è DS, –µ—Å–ª–∏ design-system)
- –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ
- –ö–∞–∫–æ–π –ø–∞—Ç—Ç–µ—Ä–Ω –¥–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ–Ω—Ñ–∏–≥ `.ds-scanner.config.ts`
  –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –≤ –±—É–¥—É—â–µ–º
```

---

### –§–∞–π–ª: `ai-instructions/report.md`

```markdown
# DS Adoption Analytical Report

## –¢–≤–æ—è —Ä–æ–ª—å
–¢—ã –∞–Ω–∞–ª–∏—Ç–∏–∫ –¥–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º—ã. –ù–∞–ø–∏—à–∏ –∫—Ä–∞—Ç–∫–∏–π actionable –æ—Ç—á—ë—Ç
–ø–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è.

## –ö–æ–Ω—Ç–µ–∫—Å—Ç

–ü—Ä–æ—á–∏—Ç–∞–π JSON-–æ—Ç—á—ë—Ç —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è. –ö–ª—é—á–µ–≤—ã–µ —Å–µ–∫—Ü–∏–∏:
- `summary` ‚Äî –æ–±—â–∏–µ –º–µ—Ç—Ä–∏–∫–∏ adoption
- `summary.designSystems[]` ‚Äî adoption –ø–æ –∫–∞–∂–¥–æ–π DS
- `byRepository[]` ‚Äî breakdown –ø–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º
- `byComponent` ‚Äî usage –ø–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º

## –ß—Ç–æ –≤–∫–ª—é—á–∏—Ç—å –≤ –æ—Ç—á—ë—Ç

1. **–û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞** (1-2 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è)
   –ó–¥–æ—Ä–æ–≤ –ª–∏ adoption? –û—Ä–∏–µ–Ω—Ç–∏—Ä—ã: >60% Year 1 ‚Äî —Ö–æ—Ä–æ—à–æ, >80% ‚Äî mature

2. **Breakdown –ø–æ DS**
   –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∂–¥–∞—è DS? –ì–¥–µ —Å–∏–ª—å–Ω–µ–µ/—Å–ª–∞–±–µ–µ?

3. **–ö–ª—é—á–µ–≤—ã–µ –Ω–∞—Ö–æ–¥–∫–∏** (3-5 –ø—É–Ω–∫—Ç–æ–≤)
   –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –≤—ã–≤–æ–¥—ã –∏–∑ –¥–∞–Ω–Ω—ã—Ö, –Ω–µ –æ–±—â–∏–µ —Ñ—Ä–∞–∑—ã

4. **–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏-–∞—É—Ç—Å–∞–π–¥–µ—Ä—ã**
   –ö—Ç–æ –æ—Ç—Å—Ç–∞—ë—Ç –∏ –ø–æ—á–µ–º—É (–º–Ω–æ–≥–æ local –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤? –∫–∞–∫–∏–µ –∏–º–µ–Ω–Ω–æ?)

5. **Quick wins**
   –ß—Ç–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å –±—ã—Å—Ç—Ä–æ —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º impact –Ω–∞ adoption

6. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è**
   –ß—Ç–æ –∫–æ–º–∞–Ω–¥–µ –¥–µ–ª–∞—Ç—å –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å (—Ä–∞–Ω–∂–∏—Ä—É–π –ø–æ impact)

## –¢–æ–Ω –∏ —Ñ–æ—Ä–º–∞—Ç
- Markdown
- –î–ª—è —Ç–µ—Ö–ª–∏–¥–∞ / PM –¥–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º—ã
- –¶–∏—Ñ—Ä—ã > —ç–º–æ—Ü–∏–∏
- –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ actions > –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
- –ö—Ä–∞—Ç–∫–æ. –ù–µ –±–æ–ª—å—à–µ 1 —Å—Ç—Ä–∞–Ω–∏—Ü—ã
```

---

### –ß—Ç–æ –¥–µ–ª–∞–µ—Ç CLI (–ø–æ–¥—Å–∫–∞–∑–∫–∞ –≤ –∫–æ–Ω—Ü–µ –≤—ã–≤–æ–¥–∞)

–ü–æ—Å–ª–µ –≤—ã–≤–æ–¥–∞ —Ç–∞–±–ª–∏—Ü—ã —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏, CLI –≤—Å–µ–≥–¥–∞ –ø–µ—á–∞—Ç–∞–µ—Ç –ø–æ–¥—Å–∫–∞–∑–∫—É:

```typescript
function printAIHint(config: DSScannerConfig, reportPath: string): void {
  const aiDir = path.resolve(
    require.resolve('ds-scanner/package.json'),
    '../ai-instructions'
  );

  console.log(chalk.dim('‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ'));
  console.log(chalk.bold('ü§ñ AI-–∞–Ω–∞–ª–∏–∑'));
  console.log(chalk.dim(`   –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏: ${aiDir}/`));
  console.log(`   ‚Ä¢ ${chalk.cyan('shadow-detection.md')}  ‚Äî –Ω–∞–π—Ç–∏ –¥—É–±–ª–∏–∫–∞—Ç—ã DS –≤ –ª–æ–∫–∞–ª—å–Ω–æ–º –∫–æ–¥–µ`);
  console.log(`   ‚Ä¢ ${chalk.cyan('categorization.md')}    ‚Äî —É—Ç–æ—á–Ω–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—é –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤`);
  console.log(`   ‚Ä¢ ${chalk.cyan('report.md')}            ‚Äî –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–π –æ—Ç—á—ë—Ç —Å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏`);
  console.log('');
  console.log(chalk.dim('   –ü—Ä–∏–º–µ—Ä (Cursor / Claude Code):'));
  console.log(chalk.white(`   "–ü—Ä–æ—á–∏—Ç–∞–π ${aiDir}/shadow-detection.md`));
  console.log(chalk.white(`    –∏ ${reportPath}, –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –ª–æ–∫–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã"`));
  console.log(chalk.dim('‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ'));
}
```

---

### –ü–æ—á–µ–º—É —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–ù—É–ª–µ–≤–æ–π overhead** ‚Äî –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –Ω–∞–ø–∏—Å–∞–Ω—ã –æ–¥–∏–Ω —Ä–∞–∑, –Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è, –Ω–µ —Ç—Ä–µ–±—É—é—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
2. **–ê–≥–µ–Ω—Ç-–∞–≥–Ω–æ—Å—Ç–∏–∫** ‚Äî Cursor, Claude Code, Aider, ChatGPT, —Ö–æ—Ç—å Copilot Chat ‚Äî –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç
3. **–ö–æ–Ω—Ç–µ–∫—Å—Ç** ‚Äî –∞–≥–µ–Ω—Ç –∏ —Ç–∞–∫ –≤–∏–¥–∏—Ç —Ñ–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞ (–≤ Cursor/Claude Code), –µ–º—É –Ω–µ –Ω—É–∂–Ω—ã –∫–æ–ø–∏–∏ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤ ‚Äî –æ–Ω —Å–∞–º –Ω–∞–π–¥—ë—Ç —Ñ–∞–π–ª –ø–æ –ø—É—Ç–∏ –∏–∑ JSON
4. **–ì–∏–±–∫–æ—Å—Ç—å** ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∑–∞–¥–∞—Ç—å –õ–Æ–ë–û–ô –≤–æ–ø—Ä–æ—Å, –Ω–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω —Ç—Ä–µ–º—è "–∑–∞–¥–∞–Ω–∏—è–º–∏". –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ ‚Äî —ç—Ç–æ –ø–æ–¥—Å–∫–∞–∑–∫–∏ —Ñ–æ—Ä–º–∞—Ç–∞ –¥–∞–Ω–Ω—ã—Ö, –∞ –Ω–µ –∂—ë—Å—Ç–∫–∏–µ –∑–∞–¥–∞–Ω–∏—è
5. **–ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è** ‚Äî –º–æ–∂–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å `ai-instructions/` –≤ –ø—Ä–æ–µ–∫—Ç –∏ –¥–æ–ø–∏–ª–∏—Ç—å –ø–æ–¥ —Å–µ–±—è

---

## üíª CLI Interface

### –ö–æ–º–∞–Ω–¥—ã

```bash
# –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ ‚Äî –∑–∞–ø—É—Å–∫ —Å–∫–∞–Ω–∞
ds-scanner analyze [options]

# –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â–∏–π –∫–æ–Ω—Ñ–∏–≥ (–¥–ª—è –¥–µ–±–∞–≥–∞)
ds-scanner config [--path ./ds-scanner.config.ts]

# –°—Ä–∞–≤–Ω–∏—Ç—å –¥–≤–∞ —Å–∫–∞–Ω–∞
ds-scanner compare <baseline.json> <current.json>

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥ –≤ –ø—Ä–æ–µ–∫—Ç–µ
ds-scanner init
```

### –§–ª–∞–≥–∏ –¥–ª—è `analyze`

```
--config, -c <path>        –ü—É—Ç—å –∫ –∫–æ–Ω—Ñ–∏–≥—É (default: .ds-scanner.config.ts)
--format, -f <format>      –§–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞: table | json | csv (default: table)
--output, -o <path>        –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ—Ç—á—ë—Ç –≤ —Ñ–∞–π–ª
--verbose, -v              –ü–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥ (per-file breakdown)
--min-adoption <number>    CI: exit code 1 –µ—Å–ª–∏ adoption –Ω–∏–∂–µ –ø–æ—Ä–æ–≥–∞
--compare <path>           –°—Ä–∞–≤–Ω–∏—Ç—å —Å –ø—Ä–µ–¥—ã–¥—É—â–∏–º —Å–∫–∞–Ω–æ–º
--save-history             –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ historyDir
```

### Exit codes

```
0 ‚Äî –°–∫–∞–Ω —É—Å–ø–µ—à–µ–Ω, –ø–æ—Ä–æ–≥–∏ –ø—Ä–æ–π–¥–µ–Ω—ã (–∏–ª–∏ –Ω–µ –∑–∞–¥–∞–Ω—ã)
1 ‚Äî Adoption rate –Ω–∏–∂–µ --min-adoption –ø–æ—Ä–æ–≥–∞
2 ‚Äî –û—à–∏–±–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
3 ‚Äî –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
```

---

## üìä –§–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞

### JSON (–∫–∞–Ω–æ–Ω–∏—á–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç)

```typescript
interface ScanReport {
  meta: {
    version: string;
    timestamp: string;              // ISO 8601
    scanDurationMs: number;
    configPath: string;
    filesScanned: number;
    repositoriesScanned: number;
    designSystemsConfigured: string[];  // ["TUI", "Beaver"]
  };

  summary: {
    adoptionRate: number;
    totalComponentInstances: number;
    filePenetration: number;

    // Per-DS breakdown
    designSystems: {
      name: string;
      adoptionRate: number;         // –î–æ–ª—è —ç—Ç–æ–π DS
      instances: number;
      uniqueComponents: number;
      filePenetration: number;
    }[];

    // –°—É–º–º–∞—Ä–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
    designSystemTotal: CategoryMetrics;
    localLibrary: CategoryMetrics;
    local: CategoryMetrics;
    thirdParty: CategoryMetrics;
    htmlNative: CategoryMetrics;
  };

  byRepository: RepositoryReport[];

  byComponent: {
    // –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω—ã –ø–æ DS
    designSystems: {
      name: string;                 // "TUI"
      components: ComponentStat[];
    }[];
    localMostUsed: ComponentStat[];
    thirdParty: ComponentStat[];
  };

  // –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –ø—Ä–µ–¥—ã–¥—É—â–∏–º —Å–∫–∞–Ω–æ–º (–µ—Å–ª–∏ --compare)
  comparison?: {
    baselineDate: string;
    adoptionDelta: number;          // +2.3 –∏–ª–∏ -1.1
    byDesignSystem: {
      name: string;
      adoptionDelta: number;
    }[];
    byRepository: {
      name: string;
      adoptionDelta: number;
      trend: 'up' | 'down' | 'stable';
    }[];
    newComponents: string[];
    removedComponents: string[];
  };
}

interface RepositoryReport {
  name: string;
  path: string;
  adoptionRate: number;             // –°—É–º–º–∞—Ä–Ω—ã–π
  filesScanned: number;
  // Per-DS –≤ —Ä–∞–º–∫–∞—Ö —ç—Ç–æ–≥–æ —Ä–µ–ø–æ
  designSystems: {
    name: string;
    adoptionRate: number;
    instances: number;
    uniqueComponents: number;
  }[];
  designSystemTotal: CategoryMetrics;
  localLibrary: CategoryMetrics;
  local: CategoryMetrics;
  thirdParty: CategoryMetrics;
  htmlNative: CategoryMetrics;
}
```

### Table (human-readable)

–ü—Ä–∏ `--format table` –≤—ã–≤–æ–¥–∏—Ç—å –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª:

```
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë     DS Adoption Report ¬∑ 2026-02-26 ¬∑ 12 repos      ‚ïë
‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£

  üìä Total DS Adoption:  67.4%  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë

  üìê Per Design System
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  DS Name        Adoption   Instances   Unique   Files
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  TUI              41.2%      5,131       32     67%
  Beaver           26.2%      3,263       15     48%
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  All DS total     67.4%      8,394       47     73%

  üì¶ Full Category Breakdown
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  Category            Instances    Unique    Share
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  ‚îú TUI                 5,131       32      41.2%
  ‚îú Beaver              3,263       15      26.2%
  Local Library         1,203       23       9.7%
  Local/Custom          2,853      156      22.9%
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  (Third-party          3,201       34      excluded)
  (HTML native         28,403       42      excluded)

  üì¶ Repository √ó DS Breakdown       TUI     Beaver   Total   Local
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  checkout-frontend                  52.3%    29.8%   82.1%   17.9%
  dashboard-app                      38.1%    33.2%   71.3%   28.7%
  admin-portal                       45.6%    12.8%   58.4%   41.6%
  legacy-storefront                  31.0%     3.2%   34.2%   65.8%

  üèÜ Top Components per DS
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  TUI:
    Button                            847       203
    Text                              634       189
    Input                             412       156
  Beaver:
    PageLayout                        342       128
    FormSection                       287        95
    DataTable                         198        67

  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  ü§ñ AI-–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏: node_modules/ds-scanner/ai-instructions/
     shadow-detection.md | categorization.md | report.md

  ‚è±  Scanned 1,847 files in 4.5s
```

–¶–≤–µ—Ç–∞ —á–µ—Ä–µ–∑ `chalk`:
- üü¢ –ó–µ–ª—ë–Ω—ã–π: adoption > 70%
- üü° –ñ—ë–ª—Ç—ã–π: 40-70%
- üî¥ –ö—Ä–∞—Å–Ω—ã–π: < 40%

---

## ‚ö° Performance

### –ü–∞—Ä–∞–ª–ª–µ–ª–∏–∑–∞—Ü–∏—è

- **–ú–µ–∂–¥—É —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º–∏**: –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ (–æ–¥–∏–Ω TS resolver per repo, —ç–∫–æ–Ω–æ–º–∏–º –ø–∞–º—è—Ç—å)
- **–í–Ω—É—Ç—Ä–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è**: —Ñ–∞–π–ª—ã –ø–∞—Ä—Å—è—Ç—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —á–µ—Ä–µ–∑ `Promise.all` —Å concurrency limit (8-16)

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö —Å–∫–∞–Ω–æ–≤:

1. –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞ –≤—ã—á–∏—Å–ª—è—Ç—å SHA-256 —Ö—ç—à —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ
2. –•—Ä–∞–Ω–∏—Ç—å –∫—ç—à –≤ `${historyDir}/.cache/file-hashes.json`:
   ```json
   {
     "/repo/src/App.tsx": {
       "hash": "abc123...",
       "result": { /* FileParseResult */ }
     }
   }
   ```
3. –ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º —Å–∫–∞–Ω–µ: –µ—Å–ª–∏ —Ö—ç—à —Å–æ–≤–ø–∞–¥–∞–µ—Ç ‚Üí –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø–∞—Ä—Å–∏–Ω–≥, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫—ç—à
4. –ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è: –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–Ω—Ñ–∏–≥–∞ ‚Äî –ø–æ–ª–Ω—ã–π —Ä–µ—Å–∫–∞–Ω–∏–Ω–≥

### –û–∂–∏–¥–∞–µ–º–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- –ü–∞—Ä—Å–∏–Ω–≥ –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞: 10-30ms
- –†–µ–∑–æ–ª–≤ –æ–¥–Ω–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞: 1-5ms (—Å –∫—ç—à–µ–º)
- –¢–∏–ø–∏—á–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (500 —Ñ–∞–π–ª–æ–≤): 10-20 —Å–µ–∫—É–Ω–¥
- 10 —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤: 2-3 –º–∏–Ω—É—Ç—ã (–±–µ–∑ AI)
- –° AI: +1-2 –º–∏–Ω—É—Ç—ã

---

## üîÑ History & CI

### –•—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏

–ö–∞–∂–¥—ã–π —Å–∫–∞–Ω –ø—Ä–∏ `--save-history` —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `historyDir`:

```
.ds-metrics/
‚îú‚îÄ‚îÄ .cache/
‚îÇ   ‚îî‚îÄ‚îÄ file-hashes.json
‚îú‚îÄ‚îÄ scans/
‚îÇ   ‚îú‚îÄ‚îÄ 2026-02-24T14-30-00.json
‚îÇ   ‚îú‚îÄ‚îÄ 2026-02-25T14-30-00.json
‚îÇ   ‚îî‚îÄ‚îÄ 2026-02-26T14-30-00.json
‚îî‚îÄ‚îÄ manifest.json
```

`manifest.json` ‚Äî –∏–Ω–¥–µ–∫—Å –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞:
```json
{
  "scans": [
    { "date": "2026-02-26T14:30:00Z", "adoptionRate": 67.4, "file": "scans/2026-02-26T14-30-00.json" },
    { "date": "2026-02-25T14:30:00Z", "adoptionRate": 66.8, "file": "scans/2026-02-25T14-30-00.json" }
  ],
  "latestScan": "scans/2026-02-26T14-30-00.json"
}
```

### GitLab CI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

```yaml
ds-adoption-scan:
  stage: metrics
  image: node:18
  script:
    - npx ds-adoption-scanner analyze
      --config .ds-scanner.config.ts
      --format json
      --output .ds-metrics/scans/$(date +%Y-%m-%dT%H-%M-%S).json
      --save-history
      --min-adoption 60
  artifacts:
    paths:
      - .ds-metrics/
    expire_in: 1 year
  rules:
    - if: $CI_PIPELINE_SOURCE == "schedule"
    - if: $CI_MERGE_REQUEST_IID
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

```
tests/
‚îú‚îÄ‚îÄ unit/
‚îÇ   ‚îú‚îÄ‚îÄ parser.test.ts            # –ü–∞—Ä—Å–∏–Ω–≥ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ categorizer.test.ts       # –ü—Ä–∞–≤–∏–ª–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ calculator.test.ts        # –†–∞—Å—á—ë—Ç –º–µ—Ç—Ä–∏–∫
‚îÇ   ‚îî‚îÄ‚îÄ import-resolver.test.ts   # –†–µ–∑–æ–ª–≤ –∏–º–ø–æ—Ä—Ç–æ–≤
‚îú‚îÄ‚îÄ fixtures/
‚îÇ   ‚îú‚îÄ‚îÄ simple-repo/              # –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ barrel-exports/           # –¢–µ—Å—Ç barrel files
‚îÇ   ‚îú‚îÄ‚îÄ namespace-imports/        # –¢–µ—Å—Ç namespace imports
‚îÇ   ‚îú‚îÄ‚îÄ aliased-paths/            # –¢–µ—Å—Ç tsconfig paths
‚îÇ   ‚îî‚îÄ‚îÄ mixed-categories/         # –¢–µ—Å—Ç –≤—Å–µ—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π
‚îî‚îÄ‚îÄ integration/
    ‚îî‚îÄ‚îÄ full-scan.test.ts         # E2E —Ç–µ—Å—Ç –ø–æ–ª–Ω–æ–≥–æ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
```

### –§–∏–∫—Å—Ç—É—Ä—ã

–°–æ–∑–¥–∞—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏-—Ñ–∏–∫—Å—Ç—É—Ä—ã —Å –∏–∑–≤–µ—Å—Ç–Ω—ã–º —Å–æ—Å—Ç–∞–≤–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:

```typescript
// fixtures/simple-repo/src/App.tsx
import { Button, Input } from '@tui/components';        // DS (TUI): 2
import { PageLayout } from 'beaver-ui';                  // DS (Beaver): 1
import { SharedLayout } from '@shared/components';       // Local library: 1
import { CustomCard } from './components/CustomCard';    // Local: 1
import Select from 'react-select';                       // Third-party: 1

export const App = () => (
  <div>                       {/* HTML native */}
    <SharedLayout>
      <PageLayout>
        <CustomCard>
          <Button variant="primary">OK</Button>
          <Input placeholder="..." />
          <Select options={[]} />
        </CustomCard>
      </PageLayout>
    </SharedLayout>
  </div>
);
// Expected: DS(TUI)=2, DS(Beaver)=1, local-library=1, local=1, third-party=1, html=1
// Total DS = 3
// Adoption: 3/(3+1+1) = 60%
// TUI adoption: 2/(3+1+1) = 40%
// Beaver adoption: 1/(3+1+1) = 20%
```

---

## üìã –ü–æ—Ä—è–¥–æ–∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (–¥–ª—è Claude Code)

### Phase 1: Core Scanner (–±–µ–∑ AI)
1. `types.ts` ‚Äî –≤—Å–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
2. `config/schema.ts` + `config/defaults.ts` + `config/loader.ts`
3. `scanner/file-discovery.ts`
4. `scanner/parser.ts` + `scanner/jsx-extractor.ts`
5. `scanner/import-resolver.ts`
6. `scanner/categorizer.ts`
7. `metrics/calculator.ts` + `metrics/aggregator.ts`
8. `scanner/orchestrator.ts` ‚Äî —Å–≤—è–∑—ã–≤–∞–µ—Ç –≤—Å—ë –≤–º–µ—Å—Ç–µ
9. `output/json-reporter.ts` + `output/table-reporter.ts`
10. `cli.ts` ‚Äî entry point

### Phase 2: AI Instructions & History
11. `ai-instructions/*.md` ‚Äî –Ω–∞–ø–∏—Å–∞—Ç—å –≤—Å–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
12. `metrics/history.ts`
13. `output/csv-reporter.ts`
14. –ö–æ–º–∞–Ω–¥–∞ `compare`
15. –ö–æ–º–∞–Ω–¥–∞ `init`
16. `package.json` ‚Üí `"files": ["dist", "ai-instructions"]`

### Phase 3: Tests
17. Unit —Ç–µ—Å—Ç—ã –¥–ª—è parser, categorizer, calculator
18. –§–∏–∫—Å—Ç—É—Ä—ã-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
19. Integration —Ç–µ—Å—Ç

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ edge cases –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. **–§–∞–π–ª—ã –±–µ–∑ JSX** ‚Äî –ø–∞—Ä—Å–∏—Ç—å, –Ω–æ –Ω–µ —Ñ–µ–π–ª–∏—Ç—å. –ü—Ä–æ—Å—Ç–æ 0 usages.
2. **–û—à–∏–±–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞** ‚Äî –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å warning, –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å —Å–∫–∞–Ω. –ù–µ —Ä–æ–Ω—è—Ç—å –≤–µ—Å—å –ø—Ä–æ—Ü–µ—Å—Å –∏–∑-–∑–∞ –æ–¥–Ω–æ–≥–æ –±–∏—Ç–æ–≥–æ —Ñ–∞–π–ª–∞.
3. **Circular re-exports** ‚Äî –ø—Ä–∏ —Ä–µ–∑–æ–ª–≤–µ –∏–º–ø–æ—Ä—Ç–æ–≤ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å visited set —á—Ç–æ–±—ã –Ω–µ –∑–∞—Ü–∏–∫–ª–∏—Ç—å—Å—è.
4. **Monorepo —Å workspaces** ‚Äî –∫–∞–∂–¥—ã–π workspace –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–π "—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π" –≤ –∫–æ–Ω—Ñ–∏–≥–µ.
5. **Dynamic imports** (`lazy(() => import('./Page'))`) ‚Äî –ù–ï —Å—á–∏—Ç–∞—Ç—å –∫–∞–∫ JSX usage. –≠—Ç–æ import —Å–∞–º–æ–≥–æ –º–æ–¥—É–ª—è, –∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.
6. **Fragment syntax** (`<>...</>` –∏–ª–∏ `<React.Fragment>`) ‚Äî –ù–ï —Å—á–∏—Ç–∞—Ç—å –∫–∞–∫ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç. –≠—Ç–æ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–π —Å–∞—Ö–∞—Ä.
7. **Forwarded refs** (`React.forwardRef(...)`) ‚Äî –∫–æ–º–ø–æ–Ω–µ–Ω—Ç-–æ–±—ë—Ä—Ç–∫–∞, —Å—á–∏—Ç–∞—Ç—å –∫–∞–∫ –æ–±—ã—á–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç.
8. **Compound components** (`<Select.Option>`) ‚Äî —Å—á–∏—Ç–∞—Ç—å –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç "Select.Option", –∞—Ç—Ä–∏–±—É—Ç–∏—Ä–æ–≤–∞—Ç—å –∫ –ø–∞–∫–µ—Ç—É Select.
9. **CSS-in-JS styled components** (`styled(Button)`) ‚Äî –ù–ï –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —ç—Ç–æ–º —ç—Ç–∞–ø–µ (MVP). –≠—Ç–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, –∞ –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ JSX –±—É–¥–µ—Ç –ø–æ–π–º–∞–Ω–æ –æ–±—ã—á–Ω—ã–º –ø—É—Ç—ë–º.
10. **JSON output –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ–ª–Ω—ã–º –∏ —Å–∞–º–æ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–º** ‚Äî –∞–≥–µ–Ω—Ç (Cursor, Claude Code) –±—É–¥–µ—Ç —á–∏—Ç–∞—Ç—å —ç—Ç–æ—Ç —Ñ–∞–π–ª —Ü–µ–ª–∏–∫–æ–º, –ø–æ—ç—Ç–æ–º—É –≤ `byComponent.localMostUsed` –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤–∫–ª—é—á–∞—Ç—å `resolvedPath` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, —á—Ç–æ–±—ã –∞–≥–µ–Ω—Ç –º–æ–≥ –Ω–∞–π—Ç–∏ –∏ –ø—Ä–æ—á–∏—Ç–∞—Ç—å –∏—Å—Ö–æ–¥–Ω–∏–∫–∏.
